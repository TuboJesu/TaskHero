{% extends "partials/base.html" %}
{% load static  %}


{% block title %} HomePage {% endblock title %}

{% block contents %}

<link rel="stylesheet" href="{% static 'css/all_tasks.css'%}">
<script src="{% static 'js/all_tasks.js'%}"></script>

  <main>
    <div class="board">

      <!-- OVERDUE COLUMN -->
      <div class="column" id="overdue">
        <div class="column-header">Overdue</div>

        {% if overdue %}
          {% for task in overdue %}
            <div class="card" draggable="true">
              <div class="tag {% if task.priority == 'low' %}low{% elif task.priority == 'medium' %}medium{% elif task.priority == 'high' %}high{% endif %}">
                {{ task.priority|title }} Priority
              </div>
              <div class="task-title">{{ task.title }}</div>
              <div class="task-meta">
                <div class="task-date-time">
                  <span class="task-date">{{ task.due_date|date:"M d, Y" }}</span>
                  <span class="task-time">{{ task.due_date|time:"H:i A" }}</span>
                </div>
              </div>
              <div class="action-buttons">
                <button class="btn-edit">✏️</button>
                <button class="btn-delete">🗑️</button>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="column-empty">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            <p>No Overdue tasks here yet</p>
          </div>
        {% endif %}
      </div>

      <!-- TODO COLUMN -->
      <div class="column" id="todo">
        <div class="column-header">To Do</div>

        {% if todo %}
          {% for task in todo %}
            <div class="card" draggable="true">
              <div class="tag {% if task.priority == 'low' %}low{% elif task.priority == 'medium' %}medium{% elif task.priority == 'high' %}high{% endif %}">
                {{ task.priority|title }} Priority
              </div>
              <div class="task-title">{{ task.title }}</div>
              <div class="task-meta">
                <div class="task-date-time">
                  <span class="task-date">{{ task.due_date|date:"M d, Y" }}</span>
                  <span class="task-time">{{ task.due_date|time:"H:i A" }}</span>
                </div>
              </div>
              <div class="action-buttons">
                <button class="btn-edit">✏️</button>
                <button class="btn-delete">🗑️</button>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="column-empty">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            <p>No Todo tasks yet</p>
            <button class="add-task-btn">Add a Todo</button>
          </div>
        {% endif %}
      </div>

      <!-- IN PROGRESS COLUMN -->
      <div class="column" id="progress">
        <div class="column-header">In Progress</div>

        {% if in_progress %}
          {% for task in in_progress %}
            <div class="card" draggable="true">
              <div class="tag {% if task.priority == 'low' %}low{% elif task.priority == 'medium' %}medium{% elif task.priority == 'high' %}high{% endif %}">
                {{ task.priority|title }} Priority
              </div>
              <div class="task-title">{{ task.title }}</div>
              <div class="task-meta">
                <div class="task-date-time">
                  <span class="task-date">{{ task.due_date|date:"M d, Y" }}</span>
                  <span class="task-time">{{ task.due_date|time:"H:i A" }}</span>
                </div>
              </div>
              <div class="action-buttons">
                <button class="btn-edit">✏️</button>
                <button class="btn-delete">🗑️</button>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="column-empty">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            <p>You have no tasks in progress</p>
            <button class="add-task-btn">Add a task</button>
          </div>
        {% endif %}
      </div>

      <!-- COMPLETED COLUMN -->
      <div class="column" id="completed">
        <div class="column-header">Completed</div>

        {% if completed %}
          {% for task in completed %}
            <div class="card" draggable="true">
              <div class="tag {% if task.priority == 'low' %}low{% elif task.priority == 'medium' %}medium{% elif task.priority == 'high' %}high{% endif %}">
                {{ task.priority|title }} Priority
              </div>
              <div class="task-title">{{ task.title }}</div>
              <div class="task-meta">
                <div class="task-date-time">
                  <span class="task-date">{{ task.due_date|date:"M d, Y" }}</span>
                  <span class="task-time">{{ task.due_date|time:"H:i A" }}</span>
                </div>
              </div>
              <div class="action-buttons">
                <button class="btn-edit">✏️</button>
                <button class="btn-delete">🗑️</button>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="column-empty">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            <p>You have no completed tasks</p>
          </div>
        {% endif %}
      </div>

    </div>
  </main>



  <script>
      // Basic functionality for the edit and delete buttons
      document.querySelectorAll('.btn-edit').forEach(btn => {
          btn.addEventListener('click', function() {
              alert('Edit task functionality would go here');
          });
      });

      document.querySelectorAll('.btn-delete').forEach(btn => {
          btn.addEventListener('click', function() {
              const card = this.closest('.card');
              if (confirm('Are you sure you want to delete this task?')) {
                  card.remove();
              }
          });
      });
  </script>
{% endblock contents %}